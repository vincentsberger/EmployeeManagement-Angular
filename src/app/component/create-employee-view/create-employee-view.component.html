<section>
  <div class="container">
    <form [formGroup]="newEmployeeForm" (keyup.enter)="saveEmployee()">
      <div
        class="formfield d-flex justify-content-start gap-3 flex-wrap align-items-center"
      >
        <div class="inputfield">
          <label for="firstName">Vorname</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('firstName')?.invalid &&
                newEmployeeForm.get('firstName')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('firstName')?.valid
            }"
            id="firstName"
            formControlName="firstName"
            type="text"
          />

          <label for="lastName">Nachname</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('lastName')?.invalid &&
                newEmployeeForm.get('lastName')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('lastName')?.valid
            }"
            id="lastName"
            formControlName="lastName"
            type="text"
          />

          <label for="phone">Telefonnummer</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('phone')?.invalid &&
                newEmployeeForm.get('phone')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('phone')?.valid
            }"
            id="phone"
            formControlName="phone"
            type="text"
          />
        </div>

        <div class="inputfield">
          <label for="street">Straße und Hausnummer</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('street')?.invalid &&
                newEmployeeForm.get('street')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('street')?.valid
            }"
            id="street"
            formControlName="street"
            type="text"
          />

          <label for="city">Stadt</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('city')?.invalid &&
                newEmployeeForm.get('city')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('city')?.valid
            }"
            id="city"
            formControlName="city"
            type="text"
          />

          <label for="postcode">Postleitzahl</label>
          <input
            class="form-control rounded-pill mb-2"
            [class]="{
              'is-invalid':
                newEmployeeForm.get('postcode')?.invalid &&
                newEmployeeForm.get('postcode')?.dirty
            }"
            [class]="{
              'is-valid': newEmployeeForm.get('postcode')?.valid
            }"
            id="postcode"
            formControlName="postcode"
            type="text"
          />
        </div>
      </div>

      <div>
      <h5 class="container">Qualifikationen</h5>
      <div class="container">
        <mat-form-field appearance="fill">
          <mat-select
          id="qualificationSelect"
          name="qualificationSelect"
          [(value)]="selectedItems"
          multiple
          placeholder="Qualifikationen"
          (selectionChange)="onSelectionChange($event)"
          >
          <!-- Options -->
          <mat-option
          *ngFor="let qualification of qualifications$ | async"
          value="{{ qualification.id }}"
            >
            {{ qualification.skill }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
        <div class="d-flex gap-2">
          <input
            type="text"
            class="form-control flex-grow-1"
            formControlName="newSkill"
            placeholder="Eine neue Qualifikation hinzufügen"
            (keydown.enter)="$event.preventDefault()"/>
          <button class="btn btn-primary" type="button" (click)="addNewQualification()">Hinzufügen</button>
        </div>
    </div>

      <div class="container mt-3">
        <button
          class="btn text-white btn-primary me-4"
          type="button"
          [disabled]="!newEmployeeForm.valid"
          (click)="saveEmployee()"
          (keyup.enter)="saveEmployee()"
        >
          Speichern
        </button>
        <button
          class="btn text-danger btn-outline-secondary me-2"
          type="button"
          (click)="cancel()"
        >
          Abbrechen
        </button>
      </div>
    </form>
  </div>
</section>
